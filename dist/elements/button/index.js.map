{"version":3,"file":"index.js","sources":["../../../elements/button/index.ts"],"sourcesContent":["// HTMLElement 타입 선언\r\nlet HTMLElement: typeof globalThis.HTMLElement = globalThis.HTMLElement || class { };\r\n\r\n// 브라우저 환경에서 HTMLElement 초기화\r\nif (typeof window !== 'undefined') {\r\n\tHTMLElement = window.HTMLElement;\r\n}\r\n\r\nimport { DefineOnce } from '../../util';\r\nimport { token } from '../typo/style.css';\r\nimport {\r\n\taccentButton,\r\n\tbuttonStyle,\r\n\tdisabledButton,\r\n\tdangerButton,\r\n\tghostButton,\r\n\tloadingIcon,\r\n\tsecondaryButton,\r\n} from './style.css';\r\n\r\nconst TYPE_CLASS_MAP: Record<string, string> = {\r\n\taccent: accentButton,\r\n\tsecondary: secondaryButton,\r\n\tghost: ghostButton,\r\n\tdanger: dangerButton,\r\n};\r\n\r\n// TODO: Reimplement IcecreamButton component\r\n\r\nclass IcecreamButton extends HTMLElement {\r\n\tstatic observedAttributes = ['disabled', 'type', 'icon', 'loading'];\r\n\tstatic defaultType = 'primary';\r\n\r\n\tprivate typeClass: string | null = null;\r\n\tprivate loadingIcon: HTMLDivElement | null = null;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\t// 브라우저 환경에서만 loadingIcon 생성\r\n\t\tif (typeof window !== 'undefined') {\r\n\t\t\tthis.loadingIcon = document.createElement('div');\r\n\t\t\tthis.loadingIcon.classList.add(loadingIcon);\r\n\t\t\tthis.loadingIcon.innerHTML = `\r\n        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <style>.spinner_aj0A{transform-origin:center;animation:spinner_KYSC .75s infinite linear}@keyframes spinner_KYSC{100%{transform:rotate(360deg)}}</style>\r\n        <path d=\"M12,4a8,8,0,0,1,7.89,6.7A1.53,1.53,0,0,0,21.38,12h0a1.5,1.5,0,0,0,1.48-1.75,11,11,0,0,0-21.72,0A1.5,1.5,0,0,0,2.62,12h0a1.53,1.53,0,0,0,1.49-1.3A8,8,0,0,1,12,4Z\" class=\"spinner_aj0A\" fill=\"currentColor\"/></svg>\r\n      `;\r\n\t\t}\r\n\t}\r\n\r\n\tconnectedCallback() {\r\n\t\tif (typeof window !== 'undefined') {\r\n\t\t\tthis.addEventListener('click', () => {\r\n\t\t\t\tif (this.getAttribute('type') === 'submit') {\r\n\t\t\t\t\tthis.submit();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.addEventListener('keydown', (event) => {\r\n\t\t\t\tconst isEnter = event.key === 'Enter';\r\n\t\t\t\tconst isSpace = event.key === ' ';\r\n\r\n\t\t\t\tif (!isEnter && !isSpace) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.getAttribute('type') === 'submit') {\r\n\t\t\t\t\tthis.submit();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.click();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.setAttribute('aria-atomic', 'true');\r\n\t\t\tthis.classList.add(buttonStyle, token);\r\n\t\t\tif (this.loadingIcon) {\r\n\t\t\t\tthis.insertAdjacentElement('afterbegin', this.loadingIcon);\r\n\t\t\t}\r\n\r\n\t\t\tthis.setInitialAttributes();\r\n\t\t}\r\n\t}\r\n\r\n\tsubmit() {\r\n\t\tif (typeof window !== 'undefined') {\r\n\t\t\tconst virtualSubmitButton = document.createElement('input');\r\n\t\t\tvirtualSubmitButton.type = 'submit';\r\n\t\t\tvirtualSubmitButton.style.display = 'none';\r\n\r\n\t\t\tthis.parentElement?.appendChild(virtualSubmitButton);\r\n\t\t\tvirtualSubmitButton.click();\r\n\t\t\tthis.parentElement?.removeChild(virtualSubmitButton);\r\n\t\t}\r\n\t}\r\n\r\n\tsetInitialAttributes() {\r\n\t\tconst type = this.getAttribute('type') || IcecreamButton.defaultType;\r\n\r\n\t\tthis.setTypeClass(type);\r\n\r\n\t\tconst disabled = this.getAttribute('disabled') !== null;\r\n\t\tconst isLoading = this.getAttribute('loading') !== null;\r\n\r\n\t\tthis.setDisability(disabled, isLoading);\r\n\t}\r\n\r\n\tattributeChangedCallback(\r\n\t\tname: string,\r\n\t\t_oldValue: string,\r\n\t\tnewValue: string\r\n\t) {\r\n\t\tif (name === 'disabled') {\r\n\t\t\tconst isLoading = this.getAttribute('loading') !== null;\r\n\t\t\tthis.setDisability(newValue !== null, isLoading);\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (name === 'type') {\r\n\t\t\tthis.setTypeClass(newValue);\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (name === 'loading') {\r\n\t\t\tthis.setLoading(newValue !== null);\r\n\r\n\t\t\tconst isDisabled = this.getAttribute('disabled') !== null;\r\n\t\t\tthis.setDisability(isDisabled, newValue !== null);\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\tsetTypeClass(type: string | null) {\r\n\t\tif (!type) return;\r\n\r\n\t\tif (this.typeClass) {\r\n\t\t\tthis.classList.remove(this.typeClass);\r\n\t\t}\r\n\r\n\t\tconst newTypeClass = TYPE_CLASS_MAP[type];\r\n\t\tif (!newTypeClass) return;\r\n\r\n\t\tthis.classList.add(newTypeClass);\r\n\t\tthis.typeClass = newTypeClass;\r\n\t}\r\n\r\n\tsetDisability(disabled: boolean, isLoading: boolean) {\r\n\t\tif (typeof window !== 'undefined') {\r\n\t\t\tconst isChildOfAnchor = this.parentElement instanceof HTMLAnchorElement;\r\n\t\t\tconst isBlocked = disabled || isLoading;\r\n\r\n\t\t\tconst tabindex = isChildOfAnchor || isBlocked ? '-1' : '0';\r\n\r\n\t\t\tif (isBlocked) {\r\n\t\t\t\tthis.classList.add(disabledButton);\r\n\t\t\t\tthis.setAttribute('aria-disabled', 'true');\r\n\t\t\t} else {\r\n\t\t\t\tthis.classList.remove(disabledButton);\r\n\t\t\t\tthis.removeAttribute('aria-disabled');\r\n\t\t\t}\r\n\r\n\t\t\tthis.setAttribute('tabindex', tabindex);\r\n\t\t}\r\n\t}\r\n\r\n\tsetLoading(isLoading: boolean) {\r\n\t\tif (typeof window !== 'undefined' && this.loadingIcon) {\r\n\t\t\tif (isLoading) {\r\n\t\t\t\tthis.setAttribute('aria-live', 'polite');\r\n\t\t\t\tthis.setAttribute('aria-busy', 'true');\r\n\t\t\t\tthis.loadingIcon.style.setProperty('display', 'block');\r\n\t\t\t} else {\r\n\t\t\t\tthis.removeAttribute('aria-live');\r\n\t\t\t\tthis.removeAttribute('aria-busy');\r\n\t\t\t\tthis.loadingIcon.style.setProperty('display', 'none');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tset textContent(value: string) {\r\n\t\tif (typeof window !== 'undefined') {\r\n\t\t\tconst textNodes = Array.from(this.childNodes).filter(\r\n\t\t\t\t(node) => node instanceof Text && node.textContent?.trim().length\r\n\t\t\t);\r\n\r\n\t\t\tfor (const node of textNodes) {\r\n\t\t\t\tthis.removeChild(node);\r\n\t\t\t}\r\n\r\n\t\t\tthis.appendChild(document.createTextNode(value));\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// 브라우저 환경에서만 DefineOnce.define 실행\r\nif (typeof window !== 'undefined') {\r\n\tconst NAME = 'ic-button';\r\n\tDefineOnce.define(NAME, IcecreamButton);\r\n}\r\n\r\nexport default typeof window !== 'undefined' ? 'ic-button' : () => null;\r\n\r\nexport interface IcecreamButtonProps {\r\n\ttype?: 'accent' | 'secondary' | 'ghost' | 'danger';\r\n\tdisabled?: boolean;\r\n\tloading?: boolean;\r\n\ticon?: string;\r\n\tchildren?: any;\r\n\tsize?: 'default' | 'big' | 'bigger';\r\n}"],"names":["HTMLElement","TYPE_CLASS_MAP","accentButton","secondaryButton","ghostButton","dangerButton","_IcecreamButton","loadingIcon","event","isEnter","isSpace","buttonStyle","token","virtualSubmitButton","_a","_b","type","disabled","isLoading","name","_oldValue","newValue","isDisabled","newTypeClass","isChildOfAnchor","isBlocked","tabindex","disabledButton","value","textNodes","node","IcecreamButton","DefineOnce","index"],"mappings":"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"}